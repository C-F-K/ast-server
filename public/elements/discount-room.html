<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-firebase/core-firebase.html">
<!-- <link rel="import" href="../bower_components/core-firebase/firebase-import.html"> -->
<!-- <link rel="import" href="./discount-input.html">
<link rel="import" href="./discount-display.html"> -->

<polymer-element name="discount-room">
	<template>
		<core-firebase 	location="https://discount-app.firebaseio.com/" 
						list="{{discount}}" 
						on-items-added={{update}}
						on-items-removed={{update}}
						on-items-changed={{update}}
						id="firebase">
		</core-firebase>
		<!-- <discount-input></discount-input>
		<discount-display></discount-display> -->
		<input id="uchar" type="text"></input>
		<button id="submit" on-click={{sendChar}}>Submit</button>
		<button id="remove" on-click={{removeChar}}>Remove</button>
		<hr>
		<pre id="display"></pre>
	</template>
	<script>
		Polymer('discount-room', {
			ready: function (){
				console.log(this.discount);
			},
			sendChar: function sendChar(){
				chr = this.$.uchar.value;
				this.$.firebase.push({uchar: chr, posx: 0, posy: 0});
			},
			update: function update(){
				this.$.display.innerHTML = JSON.stringify(this.discount);
			},
			removeChar: function removeChar(){
				toRemove = this.$.uchar.value;
				for (i = 0; i < this.discount.length; i++){
					if (this.discount[i].uchar == toRemove){
						this.$.firebase.remove(this.discount[i]);
						this.discount.splice(i, 1);
					}
				}
			}

		});
	</script>
</polymer-element>
